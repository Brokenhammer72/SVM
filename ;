#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

#define Stack_Size 512

int ip = 0;//instruction Pointer
int sp = -1; //stack pointer

int stack[Stack_Size];

bool running = true;

enum{
  PSH,
  POP,
  ADD,
  SUB,
  MUL,
  DIV,
  HLT
} InstructionSet;



//example program
int program[] = {
  PSH, 2, 
  PSH, 2,
  ADD,
  PSH, 4,
  SUB,
  HLT,
  //ans = 0
};


int fetch(){
  return program[ip];
}

//evaluates the instrcution
void eval(int instr){
  //printf("%d\n",instr);
  switch(instr){
    case HLT:{
        running = false;
    }

    case PSH: {
        sp++;
        stack[sp] = program[++ip];
    }
  }  
}

void printstack(){
  for(int i=0;i<5;i++){
    printf("%d\n",stack[i]);
  }
}
int main(){
  while(running){
    eval(fetch());
    ip++;
  }
  printstack();
}
